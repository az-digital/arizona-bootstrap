{"version":3,"file":"modal.js","sources":["../src/modal.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap modal.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport Backdrop from './util/backdrop.js'\nimport { enableDismissTrigger } from './util/component-functions.js'\nimport FocusTrap from './util/focustrap.js'\nimport {\n  defineJQueryPlugin, isRTL, isVisible, reflow\n} from './util/index.js'\nimport ScrollBarHelper from './util/scrollbar.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'modal'\nconst DATA_KEY = 'bs.modal'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst ESCAPE_KEY = 'Escape'\n\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDE_PREVENTED = `hidePrevented${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_RESIZE = `resize${EVENT_KEY}`\nconst EVENT_CLICK_DISMISS = `click.dismiss${EVENT_KEY}`\nconst EVENT_MOUSEDOWN_DISMISS = `mousedown.dismiss${EVENT_KEY}`\nconst EVENT_KEYDOWN_DISMISS = `keydown.dismiss${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_OPEN = 'modal-open'\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_STATIC = 'modal-static'\n\nconst OPEN_SELECTOR = '.modal.show'\nconst SELECTOR_DIALOG = '.modal-dialog'\nconst SELECTOR_MODAL_BODY = '.modal-body'\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"modal\"]'\n\nconst Default = {\n  backdrop: true,\n  focus: true,\n  keyboard: true\n}\n\nconst DefaultType = {\n  backdrop: '(boolean|string)',\n  focus: 'boolean',\n  keyboard: 'boolean'\n}\n\n/**\n * Class definition\n */\n\nclass Modal extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._dialog = SelectorEngine.findOne(SELECTOR_DIALOG, this._element)\n    this._backdrop = this._initializeBackDrop()\n    this._focustrap = this._initializeFocusTrap()\n    this._isShown = false\n    this._isTransitioning = false\n    this._scrollBar = new ScrollBarHelper()\n\n    this._addEventListeners()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget)\n  }\n\n  show(relatedTarget) {\n    if (this._isShown || this._isTransitioning) {\n      return\n    }\n\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW, {\n      relatedTarget\n    })\n\n    if (showEvent.defaultPrevented) {\n      return\n    }\n\n    this._isShown = true\n    this._isTransitioning = true\n\n    this._scrollBar.hide()\n\n    document.body.classList.add(CLASS_NAME_OPEN)\n\n    this._adjustDialog()\n\n    this._backdrop.show(() => this._showElement(relatedTarget))\n  }\n\n  hide() {\n    if (!this._isShown || this._isTransitioning) {\n      return\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE)\n\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    this._isShown = false\n    this._isTransitioning = true\n    this._focustrap.deactivate()\n\n    this._element.classList.remove(CLASS_NAME_SHOW)\n\n    this._queueCallback(() => this._hideModal(), this._element, this._isAnimated())\n  }\n\n  dispose() {\n    EventHandler.off(window, EVENT_KEY)\n    EventHandler.off(this._dialog, EVENT_KEY)\n\n    this._backdrop.dispose()\n    this._focustrap.deactivate()\n\n    super.dispose()\n  }\n\n  handleUpdate() {\n    this._adjustDialog()\n  }\n\n  // Private\n  _initializeBackDrop() {\n    return new Backdrop({\n      isVisible: Boolean(this._config.backdrop), // 'static' option will be translated to true, and booleans will keep their value,\n      isAnimated: this._isAnimated()\n    })\n  }\n\n  _initializeFocusTrap() {\n    return new FocusTrap({\n      trapElement: this._element\n    })\n  }\n\n  _showElement(relatedTarget) {\n    // try to append dynamic modal\n    if (!document.body.contains(this._element)) {\n      document.body.append(this._element)\n    }\n\n    this._element.style.display = 'block'\n    this._element.removeAttribute('aria-hidden')\n    this._element.setAttribute('aria-modal', true)\n    this._element.setAttribute('role', 'dialog')\n    this._element.scrollTop = 0\n\n    const modalBody = SelectorEngine.findOne(SELECTOR_MODAL_BODY, this._dialog)\n    if (modalBody) {\n      modalBody.scrollTop = 0\n    }\n\n    reflow(this._element)\n\n    this._element.classList.add(CLASS_NAME_SHOW)\n\n    const transitionComplete = () => {\n      if (this._config.focus) {\n        this._focustrap.activate()\n      }\n\n      this._isTransitioning = false\n      EventHandler.trigger(this._element, EVENT_SHOWN, {\n        relatedTarget\n      })\n    }\n\n    this._queueCallback(transitionComplete, this._dialog, this._isAnimated())\n  }\n\n  _addEventListeners() {\n    EventHandler.on(this._element, EVENT_KEYDOWN_DISMISS, event => {\n      if (event.key !== ESCAPE_KEY) {\n        return\n      }\n\n      if (this._config.keyboard) {\n        this.hide()\n        return\n      }\n\n      this._triggerBackdropTransition()\n    })\n\n    EventHandler.on(window, EVENT_RESIZE, () => {\n      if (this._isShown && !this._isTransitioning) {\n        this._adjustDialog()\n      }\n    })\n\n    EventHandler.on(this._element, EVENT_MOUSEDOWN_DISMISS, event => {\n      // a bad trick to segregate clicks that may start inside dialog but end outside, and avoid listen to scrollbar clicks\n      EventHandler.one(this._element, EVENT_CLICK_DISMISS, event2 => {\n        if (this._element !== event.target || this._element !== event2.target) {\n          return\n        }\n\n        if (this._config.backdrop === 'static') {\n          this._triggerBackdropTransition()\n          return\n        }\n\n        if (this._config.backdrop) {\n          this.hide()\n        }\n      })\n    })\n  }\n\n  _hideModal() {\n    this._element.style.display = 'none'\n    this._element.setAttribute('aria-hidden', true)\n    this._element.removeAttribute('aria-modal')\n    this._element.removeAttribute('role')\n    this._isTransitioning = false\n\n    this._backdrop.hide(() => {\n      document.body.classList.remove(CLASS_NAME_OPEN)\n      this._resetAdjustments()\n      this._scrollBar.reset()\n      EventHandler.trigger(this._element, EVENT_HIDDEN)\n    })\n  }\n\n  _isAnimated() {\n    return this._element.classList.contains(CLASS_NAME_FADE)\n  }\n\n  _triggerBackdropTransition() {\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED)\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight\n    const initialOverflowY = this._element.style.overflowY\n    // return if the following background transition hasn't yet completed\n    if (initialOverflowY === 'hidden' || this._element.classList.contains(CLASS_NAME_STATIC)) {\n      return\n    }\n\n    if (!isModalOverflowing) {\n      this._element.style.overflowY = 'hidden'\n    }\n\n    this._element.classList.add(CLASS_NAME_STATIC)\n    this._queueCallback(() => {\n      this._element.classList.remove(CLASS_NAME_STATIC)\n      this._queueCallback(() => {\n        this._element.style.overflowY = initialOverflowY\n      }, this._dialog)\n    }, this._dialog)\n\n    this._element.focus()\n  }\n\n  /**\n   * The following methods are used to handle overflowing modals\n   */\n\n  _adjustDialog() {\n    const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight\n    const scrollbarWidth = this._scrollBar.getWidth()\n    const isBodyOverflowing = scrollbarWidth > 0\n\n    if (isBodyOverflowing && !isModalOverflowing) {\n      const property = isRTL() ? 'paddingLeft' : 'paddingRight'\n      this._element.style[property] = `${scrollbarWidth}px`\n    }\n\n    if (!isBodyOverflowing && isModalOverflowing) {\n      const property = isRTL() ? 'paddingRight' : 'paddingLeft'\n      this._element.style[property] = `${scrollbarWidth}px`\n    }\n  }\n\n  _resetAdjustments() {\n    this._element.style.paddingLeft = ''\n    this._element.style.paddingRight = ''\n  }\n\n  // Static\n  static jQueryInterface(config, relatedTarget) {\n    return this.each(function () {\n      const data = Modal.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config](relatedTarget)\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  const target = SelectorEngine.getElementFromSelector(this)\n\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault()\n  }\n\n  EventHandler.one(target, EVENT_SHOW, showEvent => {\n    if (showEvent.defaultPrevented) {\n      // only register focus restorer if modal will actually get shown\n      return\n    }\n\n    EventHandler.one(target, EVENT_HIDDEN, () => {\n      if (isVisible(this)) {\n        this.focus()\n      }\n    })\n  })\n\n  // avoid conflict when clicking modal toggler while another one is open\n  const alreadyOpen = SelectorEngine.findOne(OPEN_SELECTOR)\n  if (alreadyOpen) {\n    Modal.getInstance(alreadyOpen).hide()\n  }\n\n  const data = Modal.getOrCreateInstance(target)\n\n  data.toggle(this)\n})\n\nenableDismissTrigger(Modal)\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Modal)\n\nexport default Modal\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","ESCAPE_KEY","EVENT_HIDE","EVENT_HIDE_PREVENTED","EVENT_HIDDEN","EVENT_SHOW","EVENT_SHOWN","EVENT_RESIZE","EVENT_CLICK_DISMISS","EVENT_MOUSEDOWN_DISMISS","EVENT_KEYDOWN_DISMISS","EVENT_CLICK_DATA_API","CLASS_NAME_OPEN","CLASS_NAME_FADE","CLASS_NAME_SHOW","CLASS_NAME_STATIC","OPEN_SELECTOR","SELECTOR_DIALOG","SELECTOR_MODAL_BODY","SELECTOR_DATA_TOGGLE","Default","backdrop","focus","keyboard","DefaultType","Modal","_BaseComponent","element","config","_this","call","_dialog","SelectorEngine","findOne","_element","_backdrop","_initializeBackDrop","_focustrap","_initializeFocusTrap","_isShown","_isTransitioning","_scrollBar","ScrollBarHelper","_addEventListeners","_inheritsLoose","_proto","prototype","toggle","relatedTarget","hide","show","_this2","showEvent","EventHandler","trigger","defaultPrevented","document","body","classList","add","_adjustDialog","_showElement","_this3","hideEvent","deactivate","remove","_queueCallback","_hideModal","_isAnimated","dispose","off","window","handleUpdate","Backdrop","isVisible","Boolean","_config","isAnimated","FocusTrap","trapElement","_this4","contains","append","style","display","removeAttribute","setAttribute","scrollTop","modalBody","reflow","transitionComplete","activate","_this5","on","event","key","_triggerBackdropTransition","one","event2","target","_this6","_resetAdjustments","reset","_this7","isModalOverflowing","scrollHeight","documentElement","clientHeight","initialOverflowY","overflowY","scrollbarWidth","getWidth","isBodyOverflowing","property","isRTL","paddingLeft","paddingRight","jQueryInterface","each","data","getOrCreateInstance","TypeError","_createClass","get","BaseComponent","_this8","getElementFromSelector","includes","tagName","preventDefault","alreadyOpen","getInstance","enableDismissTrigger","defineJQueryPlugin"],"mappings":"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"}