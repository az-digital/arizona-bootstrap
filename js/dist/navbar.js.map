{"version":3,"file":"navbar.js","sources":["../src/navbar.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Arizona Bootstrap: navbar.js\n * Licensed under MIT (https://github.com/az-digital/arizona-bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Collapse from '../../node_modules/bootstrap/js/src/collapse.js'\nimport Dropdown from '../../node_modules/bootstrap/js/src/dropdown.js'\nimport EventHandler from '../../node_modules/bootstrap/js/src/dom/event-handler.js'\n\nconst HOVER_MEDIA_QUERY = '(hover: hover) and (pointer: fine)'\nconst HIDE_DELAY_MS = 300\nconst RESIZE_DEBOUNCE_MS = 100\n\n// Enable hover behavior only on fine-pointer devices to avoid touch conflicts.\nconst supportsPointerHover = () => typeof window !== 'undefined' && window.matchMedia?.(HOVER_MEDIA_QUERY)?.matches === true\n\n/**\n * Calculate and set the max-width for dropdown menus in a navbar-az to half\n * the navbar width, and toggle `dropdown-menu-end` on dropdowns positioned\n * past the midpoint that would otherwise overflow.\n */\nfunction updateDropdownAlignment(navbar) {\n  const navbarWidth = navbar.offsetWidth\n  const halfWidth = Math.floor(navbarWidth / 2)\n\n  // Set the CSS custom property so dropdown-menu max-width stays in sync.\n  navbar.style.setProperty('--az-navbar-dropdown-max-width', `${halfWidth}px`)\n\n  const dropdowns = navbar.querySelectorAll('.navbar-nav > .nav-item.dropdown')\n\n  for (const dropdown of dropdowns) {\n    const menu = dropdown.querySelector(':scope > .dropdown-menu')\n    if (!menu) {\n      continue\n    }\n\n    // Determine this dropdown's horizontal position relative to the navbar.\n    const navbarRect = navbar.getBoundingClientRect()\n    const dropdownRect = dropdown.getBoundingClientRect()\n    const dropdownStart = dropdownRect.left - navbarRect.left\n    const remainingSpace = navbarRect.right - dropdownRect.left\n\n    // Only right-align if the dropdown is past the midpoint AND its max-content\n    // width would overflow the remaining space to the right of the navbar.\n    // We temporarily measure the menu's natural width to make this determination.\n    // The menu may be hidden (display:none), so we must briefly make it visible\n    // off-screen to get an accurate measurement.\n    const wasHidden = window.getComputedStyle(menu).display === 'none'\n    if (wasHidden) {\n      menu.style.display = 'block'\n      menu.style.visibility = 'hidden'\n      menu.style.position = 'absolute'\n    }\n\n    const savedMaxWidth = menu.style.maxWidth\n    const savedWidth = menu.style.width\n    menu.style.maxWidth = 'none'\n    menu.style.width = 'max-content'\n    const naturalWidth = menu.scrollWidth\n    menu.style.maxWidth = savedMaxWidth\n    menu.style.width = savedWidth\n\n    if (wasHidden) {\n      menu.style.display = ''\n      menu.style.visibility = ''\n      menu.style.position = ''\n    }\n\n    if (dropdownStart > halfWidth && naturalWidth > remainingSpace) {\n      menu.classList.add('dropdown-menu-end')\n    } else {\n      menu.classList.remove('dropdown-menu-end')\n    }\n  }\n}\n\n/**\n * Set up a ResizeObserver to keep dropdown alignment in sync with the navbar\n * width (handles viewport changes, container resizing, etc.).\n */\nfunction observeNavbarResize(navbar) {\n  if (typeof ResizeObserver === 'undefined') {\n    return\n  }\n\n  let resizeTimer = null\n\n  const observer = new ResizeObserver(() => {\n    if (resizeTimer) {\n      clearTimeout(resizeTimer)\n    }\n\n    resizeTimer = setTimeout(() => {\n      updateDropdownAlignment(navbar)\n    }, RESIZE_DEBOUNCE_MS)\n  })\n\n  observer.observe(navbar)\n}\n\nfunction getPrimaryDropdownTrigger(dropdownElement) {\n  const toggle = dropdownElement.querySelector(':scope > .dropdown-toggle')\n  return toggle instanceof HTMLElement ? toggle : null\n}\n\n// Close sibling dropdowns unless they were opened via click.\nfunction closeOtherDropdowns(navbar, currentDropdownElement) {\n  const openTriggers = navbar.querySelectorAll('.navbar-nav > .nav-item.dropdown .dropdown-toggle.show')\n\n  for (const trigger of openTriggers) {\n    if (!(trigger instanceof HTMLElement)) {\n      continue\n    }\n\n    const dropdownElement = trigger.closest('.navbar-nav > .nav-item.dropdown')\n    if (!dropdownElement || dropdownElement === currentDropdownElement) {\n      continue\n    }\n\n    const instance = Dropdown.getInstance(trigger)\n\n    if (instance?.isClickOpen?.()) {\n      continue\n    }\n\n    instance?.hide()\n  }\n}\n\nclass NavbarHoverDropdown extends Dropdown {\n  constructor(element, dropdownElement, navbar, config) {\n    super(element, config)\n\n    this._dropdownElement = dropdownElement\n    this._navbar = navbar\n    this._hideTimer = null\n    this._shouldCloseSiblings = dropdownElement.matches('.navbar-nav > .nav-item.dropdown')\n    this._initialCollapseStates = this._captureCollapseStates()\n    // State flags for hover/click coordination.\n    this._hoverTriggered = false\n    this._suppressNextBlur = false\n    this._suppressNextFocus = false\n    this._hoverOpen = false\n    this._clickOpen = false\n    this._pendingClick = false\n    this._wasHoverOpened = false\n    this._suppressHover = false\n    this._ignoreNextToggle = false\n\n    if (supportsPointerHover()) {\n      this._addHoverListeners()\n    }\n  }\n\n  dispose() {\n    this._removeHoverListeners()\n    super.dispose()\n  }\n\n  _addHoverListeners() {\n    if (!this._dropdownElement) {\n      return\n    }\n\n    this._boundOnEnter = () => this._handleHoverEnter()\n    this._boundOnLeave = () => this._handleHoverLeave()\n    this._boundMenuEnter = () => this._cancelScheduledHide()\n    this._boundMenuLeave = () => this._handleHoverLeave()\n    this._boundOnFocus = event => this._handleFocus(event)\n    this._boundOnBlur = event => this._handleBlur(event)\n    this._boundOnMouseDown = () => this._handleMouseDown()\n    this._boundOnClick = event => this._handleClick(event)\n\n    EventHandler.on(this._element, 'mouseenter', this._boundOnEnter)\n    EventHandler.on(this._element, 'mouseleave', this._boundOnLeave)\n    EventHandler.on(this._element, 'focus', this._boundOnFocus)\n    EventHandler.on(this._element, 'blur', this._boundOnBlur)\n    EventHandler.on(this._element, 'mousedown', this._boundOnMouseDown)\n    EventHandler.on(this._element, 'click', this._boundOnClick)\n    EventHandler.on(this._dropdownElement, 'mouseleave', this._boundOnLeave)\n\n    if (this._menu) {\n      EventHandler.on(this._menu, 'mouseenter', this._boundMenuEnter)\n      EventHandler.on(this._menu, 'mouseleave', this._boundMenuLeave)\n    }\n  }\n\n  _removeHoverListeners() {\n    if (!this._dropdownElement || !supportsPointerHover()) {\n      return\n    }\n\n    EventHandler.off(this._element, 'mouseenter', this._boundOnEnter)\n    EventHandler.off(this._element, 'mouseleave', this._boundOnLeave)\n    EventHandler.off(this._element, 'focus', this._boundOnFocus)\n    EventHandler.off(this._element, 'blur', this._boundOnBlur)\n    EventHandler.off(this._element, 'mousedown', this._boundOnMouseDown)\n    EventHandler.off(this._element, 'click', this._boundOnClick)\n    EventHandler.off(this._dropdownElement, 'mouseleave', this._boundOnLeave)\n\n    if (this._menu) {\n      EventHandler.off(this._menu, 'mouseenter', this._boundMenuEnter)\n      EventHandler.off(this._menu, 'mouseleave', this._boundMenuLeave)\n    }\n  }\n\n  // Hover opens the menu and closes hover-open siblings.\n  _handleHoverEnter() {\n    if (this._suppressHover) {\n      return\n    }\n\n    this._cancelScheduledHide()\n    this._hoverTriggered = true\n    this._hoverOpen = true\n    this._wasHoverOpened = true\n\n    if (this._shouldCloseSiblings && this._navbar && this._dropdownElement) {\n      closeOtherDropdowns(this._navbar, this._dropdownElement)\n    }\n\n    this._suppressNextFocus = true\n    this.show()\n    if (this._suppressNextFocus) {\n      this._suppressNextFocus = false\n    }\n\n    this._removePointerFocus()\n  }\n\n  _handleHoverLeave() {\n    this._suppressHover = false\n    this._scheduleHide({ source: 'hover' })\n  }\n\n  // Focus opens the menu, but skips focus transitions into the menu.\n  _handleFocus(event) {\n    // Suppress focus triggered by click - the click handler manages that interaction\n    if (this._suppressNextFocus) {\n      this._suppressNextFocus = false\n      return\n    }\n\n    if (event.relatedTarget && this._menu?.contains(event.relatedTarget)) {\n      return\n    }\n\n    this._cancelScheduledHide()\n\n    if (this._isShown()) {\n      return\n    }\n\n    this._hoverOpen = false\n    this._wasHoverOpened = false\n    this.show()\n  }\n\n  // Blur schedules a hide unless focus moved into the menu.\n  _handleBlur(event) {\n    if (this._suppressNextBlur) {\n      this._suppressNextBlur = false\n      return\n    }\n\n    if (event.relatedTarget && this._menu?.contains(event.relatedTarget)) {\n      return\n    }\n\n    this._scheduleHide()\n  }\n\n  _handleMouseDown() {\n    // Set flag before focus fires (event order: mousedown → focus → click)\n    this._suppressNextFocus = true\n  }\n\n  // Click is handled here to prevent Bootstrap's delegated double-toggle.\n  _handleClick(event) {\n    event.preventDefault()\n    event.stopImmediatePropagation()\n\n    this._pendingClick = true\n    this._cancelScheduledHide()\n    this.toggle()\n  }\n\n  // Hide on hover-out, but never when the menu is click-open.\n  _scheduleHide({ source } = {}) {\n    this._cancelScheduledHide()\n\n    if (this._clickOpen) {\n      return\n    }\n\n    if (source === 'hover' && !this._hoverOpen) {\n      return\n    }\n\n    this._hideTimer = window.setTimeout(() => {\n      this.hide()\n    }, HIDE_DELAY_MS)\n  }\n\n  _cancelScheduledHide() {\n    if (this._hideTimer) {\n      window.clearTimeout(this._hideTimer)\n      this._hideTimer = null\n    }\n  }\n\n  /**\n   * Handles click-driven toggling while preserving independent hover state.\n   * The click handler sets `_pendingClick`, and this method processes that\n   * click before Bootstrap's delegated toggle runs.\n   *\n   * Behavior:\n   * - If a click occurs while the menu is hover-open, convert it to click-open.\n   * - If already open via click, close and suppress immediate re-toggle.\n   * - Otherwise open via click and mark `_clickOpen`.\n   * - Ignore the next delegated `toggle()` invoked by Bootstrap after a handled click.\n   */\n  toggle() {\n    if (this._pendingClick) {\n      this._pendingClick = false\n      this._ignoreNextToggle = true // Ignore Bootstrap's subsequent toggle call\n\n      if (this._isShown()) {\n        if (this._wasHoverOpened && !this._clickOpen) {\n          this._clickOpen = true\n          this._hoverOpen = false\n          this._wasHoverOpened = false\n          this._cancelScheduledHide()\n          return\n        }\n\n        this._hoverOpen = false\n        this._wasHoverOpened = false\n        this._suppressHover = true\n        super.hide()\n        this._ignoreNextToggle = true\n        this._clickOpen = this._isShown()\n        return\n      }\n\n      this._hoverOpen = false\n      this._wasHoverOpened = false\n      this._cancelScheduledHide()\n      super.show()\n      this._clickOpen = this._isShown()\n      return\n    }\n\n    // Ignore toggle calls from Bootstrap's delegated handler after we already processed the click\n    if (this._ignoreNextToggle) {\n      this._ignoreNextToggle = false\n      return\n    }\n\n    return super.toggle()\n  }\n\n  hide() {\n    this._hoverOpen = false\n    this._clickOpen = false\n    this._pendingClick = false\n    this._ignoreNextToggle = false\n    this._cancelScheduledHide()\n    this._resetCollapseState()\n    return super.hide()\n  }\n\n  _completeHide(relatedTarget) {\n    this._hoverOpen = false\n    this._clickOpen = false\n    this._pendingClick = false\n    this._ignoreNextToggle = false\n    this._cancelScheduledHide()\n    this._resetCollapseState()\n    super._completeHide(relatedTarget)\n  }\n\n  /**\n   * Snapshot the initial show/hide state of each `.collapse` submenu inside\n   * this dropdown's menu, based on the server-rendered HTML at page load.\n   */\n  _captureCollapseStates() {\n    const menu = this._menu || this._dropdownElement?.querySelector('.dropdown-menu')\n    if (!menu) {\n      return new Map()\n    }\n\n    const states = new Map()\n    const collapses = menu.querySelectorAll('.collapse')\n    for (const collapse of collapses) {\n      states.set(collapse, collapse.classList.contains('show'))\n    }\n\n    return states\n  }\n\n  /**\n   * Reset every `.collapse` submenu inside this dropdown's menu back to its\n   * initial page-load state (determined by `.active` placement in the HTML).\n   */\n  _resetCollapseState() {\n    if (!this._initialCollapseStates || this._initialCollapseStates.size === 0) {\n      return\n    }\n\n    const menu = this._menu || this._dropdownElement?.querySelector('.dropdown-menu')\n    const togglesByTarget = new Map()\n\n    if (menu) {\n      const toggles = menu.querySelectorAll('[data-bs-target]')\n      for (const toggle of toggles) {\n        const target = toggle.getAttribute('data-bs-target')\n        if (target) {\n          togglesByTarget.set(target, toggle)\n        }\n      }\n    }\n\n    for (const [collapse, wasShown] of this._initialCollapseStates) {\n      const isShown = collapse.classList.contains('show')\n\n      if (wasShown === isShown) {\n        continue\n      }\n\n      const instance = Collapse.getOrCreateInstance(collapse, { toggle: false })\n\n      if (wasShown) {\n        instance.show()\n      } else {\n        instance.hide()\n      }\n\n      // Sync the toggle button's aria-expanded attribute.\n      if (collapse.id) {\n        const toggle = togglesByTarget.get(`#${collapse.id}`)\n        if (toggle) {\n          toggle.setAttribute('aria-expanded', String(wasShown))\n        }\n      }\n    }\n  }\n\n  // Remove focus after hover to avoid sticky focus rings.\n  _removePointerFocus() {\n    if (!this._hoverTriggered) {\n      return\n    }\n\n    if (document.activeElement === this._element) {\n      this._suppressNextBlur = true\n      this._element.blur()\n    }\n\n    this._hoverTriggered = false\n  }\n\n  isClickOpen() {\n    return this._clickOpen\n  }\n}\n\n// Wire up hover dropdowns for AZ navbars and global outside interactions.\nfunction enableAzNavbar() {\n  if (typeof document === 'undefined' || typeof window === 'undefined') {\n    return\n  }\n\n  const navbars = document.querySelectorAll('.navbar-az')\n  if (!navbars.length) {\n    return\n  }\n\n  if (!supportsPointerHover()) {\n    return\n  }\n\n  const handleOutsideInteraction = event => {\n    const target = event?.target\n    if (!(target instanceof Node)) {\n      return\n    }\n\n    for (const navbar of navbars) {\n      const openTriggers = navbar.querySelectorAll('.dropdown-toggle.show')\n\n      for (const trigger of openTriggers) {\n        const instance = Dropdown.getInstance(trigger)\n\n        if (!(instance instanceof NavbarHoverDropdown) || !instance.isClickOpen()) {\n          continue\n        }\n\n        const dropdownElement = trigger.closest('.navbar-nav > .nav-item.dropdown')\n        if (!dropdownElement || dropdownElement.contains(target)) {\n          continue\n        }\n\n        instance.hide()\n      }\n    }\n  }\n\n  EventHandler.on(document, 'click', handleOutsideInteraction)\n  EventHandler.on(document, 'focusin', handleOutsideInteraction)\n\n  for (const navbar of navbars) {\n    // Set initial dropdown alignment and start observing resize changes.\n    updateDropdownAlignment(navbar)\n    observeNavbarResize(navbar)\n\n    EventHandler.on(navbar, 'mouseover', event => {\n      const target = event?.target\n      if (!(target instanceof Element)) {\n        return\n      }\n\n      const navList = target.closest('.navbar-nav')\n      if (!navList) {\n        return\n      }\n\n      const openTriggers = navbar.querySelectorAll('.dropdown-toggle.show')\n\n      for (const trigger of openTriggers) {\n        const instance = Dropdown.getInstance(trigger)\n\n        if (!(instance instanceof NavbarHoverDropdown) || instance.isClickOpen()) {\n          continue\n        }\n\n        if (!instance._hoverOpen) {\n          continue\n        }\n\n        const dropdownElement = trigger.closest('.navbar-nav .nav-item.dropdown')\n        if (dropdownElement) {\n          const menuElement = instance._menu || dropdownElement.querySelector('.dropdown-menu')\n          const isInsideToggle = trigger.contains(target)\n          const isInsideMenu = menuElement instanceof Element && menuElement.contains(target)\n\n          if (isInsideToggle || isInsideMenu) {\n            continue\n          }\n        }\n\n        instance._scheduleHide({ source: 'hover' })\n      }\n    })\n\n    EventHandler.on(navbar, 'mouseleave', () => {\n      const openTriggers = navbar.querySelectorAll('.dropdown-toggle.show')\n\n      for (const trigger of openTriggers) {\n        const instance = Dropdown.getInstance(trigger)\n\n        if (instance instanceof NavbarHoverDropdown) {\n          if (instance.isClickOpen()) {\n            continue\n          }\n\n          instance._scheduleHide({ source: 'navbar' })\n          continue\n        }\n\n        instance?.hide()\n      }\n    })\n\n    const dropdowns = navbar.querySelectorAll('.navbar-nav > .nav-item.dropdown')\n\n    for (const dropdownElement of dropdowns) {\n      if (!(dropdownElement instanceof HTMLElement)) {\n        continue\n      }\n\n      const triggerElement = getPrimaryDropdownTrigger(dropdownElement)\n      if (!triggerElement) {\n        continue\n      }\n\n      const existingInstance = Dropdown.getInstance(triggerElement)\n      if (existingInstance && !(existingInstance instanceof NavbarHoverDropdown)) {\n        existingInstance.dispose()\n      }\n\n      if (existingInstance instanceof NavbarHoverDropdown) {\n        continue\n      }\n\n      createNavbarHoverDropdown(triggerElement, dropdownElement, navbar)\n    }\n  }\n}\n\nfunction createNavbarHoverDropdown(triggerElement, dropdownElement, navbar) {\n  return new NavbarHoverDropdown(triggerElement, dropdownElement, navbar)\n}\n\nexport { enableAzNavbar as default }\n"],"names":["HOVER_MEDIA_QUERY","HIDE_DELAY_MS","RESIZE_DEBOUNCE_MS","supportsPointerHover","_window$matchMedia","window","matchMedia","matches","updateDropdownAlignment","navbar","navbarWidth","offsetWidth","halfWidth","Math","floor","style","setProperty","dropdowns","querySelectorAll","_iterator","_createForOfIteratorHelperLoose","_step","done","dropdown","value","menu","querySelector","navbarRect","getBoundingClientRect","dropdownRect","dropdownStart","left","remainingSpace","right","wasHidden","getComputedStyle","display","visibility","position","savedMaxWidth","maxWidth","savedWidth","width","naturalWidth","scrollWidth","classList","add","remove","observeNavbarResize","ResizeObserver","resizeTimer","observer","clearTimeout","setTimeout","observe","getPrimaryDropdownTrigger","dropdownElement","toggle","HTMLElement","closeOtherDropdowns","currentDropdownElement","openTriggers","_iterator2","_step2","trigger","closest","instance","Dropdown","getInstance","isClickOpen","hide","NavbarHoverDropdown","_Dropdown","element","config","_this","call","_dropdownElement","_navbar","_hideTimer","_shouldCloseSiblings","_initialCollapseStates","_captureCollapseStates","_hoverTriggered","_suppressNextBlur","_suppressNextFocus","_hoverOpen","_clickOpen","_pendingClick","_wasHoverOpened","_suppressHover","_ignoreNextToggle","_addHoverListeners","_inheritsLoose","_proto","prototype","dispose","_removeHoverListeners","_this2","_boundOnEnter","_handleHoverEnter","_boundOnLeave","_handleHoverLeave","_boundMenuEnter","_cancelScheduledHide","_boundMenuLeave","_boundOnFocus","event","_handleFocus","_boundOnBlur","_handleBlur","_boundOnMouseDown","_handleMouseDown","_boundOnClick","_handleClick","EventHandler","on","_element","_menu","off","show","_removePointerFocus","_scheduleHide","source","_this$_menu","relatedTarget","contains","_isShown","_this$_menu2","preventDefault","stopImmediatePropagation","_temp","_this3","_ref","_resetCollapseState","_completeHide","_this$_dropdownElemen","Map","states","collapses","_iterator3","_step3","collapse","set","_this$_dropdownElemen2","size","togglesByTarget","toggles","_iterator4","_step4","target","getAttribute","_iterator5","_step5","_step5$value","wasShown","isShown","Collapse","getOrCreateInstance","id","get","setAttribute","String","document","activeElement","blur","enableAzNavbar","navbars","length","handleOutsideInteraction","Node","_iterator6","_step6","_iterator7","_step7","_loop","_step8","Element","navList","_iterator9","_step9","menuElement","isInsideToggle","isInsideMenu","_iterator0","_step0","_iterator1","_step1","triggerElement","existingInstance","createNavbarHoverDropdown","_iterator8"],"mappings":"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"}