{"version":3,"file":"tab.js","sources":["../src/tab.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap tab.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport { defineJQueryPlugin, getNextActiveElement, isDisabled } from './util/index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'tab'\nconst DATA_KEY = 'bs.tab'\nconst EVENT_KEY = `.${DATA_KEY}`\n\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}`\nconst EVENT_KEYDOWN = `keydown${EVENT_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}`\n\nconst ARROW_LEFT_KEY = 'ArrowLeft'\nconst ARROW_RIGHT_KEY = 'ArrowRight'\nconst ARROW_UP_KEY = 'ArrowUp'\nconst ARROW_DOWN_KEY = 'ArrowDown'\nconst HOME_KEY = 'Home'\nconst END_KEY = 'End'\n\nconst CLASS_NAME_ACTIVE = 'active'\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_DROPDOWN = 'dropdown'\n\nconst SELECTOR_DROPDOWN_TOGGLE = '.dropdown-toggle'\nconst SELECTOR_DROPDOWN_MENU = '.dropdown-menu'\nconst NOT_SELECTOR_DROPDOWN_TOGGLE = `:not(${SELECTOR_DROPDOWN_TOGGLE})`\n\nconst SELECTOR_TAB_PANEL = '.list-group, .nav, [role=\"tablist\"]'\nconst SELECTOR_OUTER = '.nav-item, .list-group-item'\nconst SELECTOR_INNER = `.nav-link${NOT_SELECTOR_DROPDOWN_TOGGLE}, .list-group-item${NOT_SELECTOR_DROPDOWN_TOGGLE}, [role=\"tab\"]${NOT_SELECTOR_DROPDOWN_TOGGLE}`\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"tab\"], [data-bs-toggle=\"pill\"], [data-bs-toggle=\"list\"]' // TODO: could only be `tab` in v6\nconst SELECTOR_INNER_ELEM = `${SELECTOR_INNER}, ${SELECTOR_DATA_TOGGLE}`\n\nconst SELECTOR_DATA_TOGGLE_ACTIVE = `.${CLASS_NAME_ACTIVE}[data-bs-toggle=\"tab\"], .${CLASS_NAME_ACTIVE}[data-bs-toggle=\"pill\"], .${CLASS_NAME_ACTIVE}[data-bs-toggle=\"list\"]`\n\n/**\n * Class definition\n */\n\nclass Tab extends BaseComponent {\n  constructor(element) {\n    super(element)\n    this._parent = this._element.closest(SELECTOR_TAB_PANEL)\n\n    if (!this._parent) {\n      return\n      // TODO: should throw exception in v6\n      // throw new TypeError(`${element.outerHTML} has not a valid parent ${SELECTOR_INNER_ELEM}`)\n    }\n\n    // Set up initial aria attributes\n    this._setInitialAttributes(this._parent, this._getChildren())\n\n    EventHandler.on(this._element, EVENT_KEYDOWN, event => this._keydown(event))\n  }\n\n  // Getters\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  show() { // Shows this elem and deactivate the active sibling if exists\n    const innerElem = this._element\n    if (this._elemIsActive(innerElem)) {\n      return\n    }\n\n    // Search for active tab on same parent to deactivate it\n    const active = this._getActiveElem()\n\n    const hideEvent = active ?\n      EventHandler.trigger(active, EVENT_HIDE, { relatedTarget: innerElem }) :\n      null\n\n    const showEvent = EventHandler.trigger(innerElem, EVENT_SHOW, { relatedTarget: active })\n\n    if (showEvent.defaultPrevented || (hideEvent && hideEvent.defaultPrevented)) {\n      return\n    }\n\n    this._deactivate(active, innerElem)\n    this._activate(innerElem, active)\n  }\n\n  // Private\n  _activate(element, relatedElem) {\n    if (!element) {\n      return\n    }\n\n    element.classList.add(CLASS_NAME_ACTIVE)\n\n    this._activate(SelectorEngine.getElementFromSelector(element)) // Search and activate/show the proper section\n\n    const complete = () => {\n      if (element.getAttribute('role') !== 'tab') {\n        element.classList.add(CLASS_NAME_SHOW)\n        return\n      }\n\n      element.removeAttribute('tabindex')\n      element.setAttribute('aria-selected', true)\n      this._toggleDropDown(element, true)\n      EventHandler.trigger(element, EVENT_SHOWN, {\n        relatedTarget: relatedElem\n      })\n    }\n\n    this._queueCallback(complete, element, element.classList.contains(CLASS_NAME_FADE))\n  }\n\n  _deactivate(element, relatedElem) {\n    if (!element) {\n      return\n    }\n\n    element.classList.remove(CLASS_NAME_ACTIVE)\n    element.blur()\n\n    this._deactivate(SelectorEngine.getElementFromSelector(element)) // Search and deactivate the shown section too\n\n    const complete = () => {\n      if (element.getAttribute('role') !== 'tab') {\n        element.classList.remove(CLASS_NAME_SHOW)\n        return\n      }\n\n      element.setAttribute('aria-selected', false)\n      element.setAttribute('tabindex', '-1')\n      this._toggleDropDown(element, false)\n      EventHandler.trigger(element, EVENT_HIDDEN, { relatedTarget: relatedElem })\n    }\n\n    this._queueCallback(complete, element, element.classList.contains(CLASS_NAME_FADE))\n  }\n\n  _keydown(event) {\n    if (!([ARROW_LEFT_KEY, ARROW_RIGHT_KEY, ARROW_UP_KEY, ARROW_DOWN_KEY, HOME_KEY, END_KEY].includes(event.key))) {\n      return\n    }\n\n    event.stopPropagation()// stopPropagation/preventDefault both added to support up/down keys without scrolling the page\n    event.preventDefault()\n\n    const children = this._getChildren().filter(element => !isDisabled(element))\n    let nextActiveElement\n\n    if ([HOME_KEY, END_KEY].includes(event.key)) {\n      nextActiveElement = children[event.key === HOME_KEY ? 0 : children.length - 1]\n    } else {\n      const isNext = [ARROW_RIGHT_KEY, ARROW_DOWN_KEY].includes(event.key)\n      nextActiveElement = getNextActiveElement(children, event.target, isNext, true)\n    }\n\n    if (nextActiveElement) {\n      nextActiveElement.focus({ preventScroll: true })\n      Tab.getOrCreateInstance(nextActiveElement).show()\n    }\n  }\n\n  _getChildren() { // collection of inner elements\n    return SelectorEngine.find(SELECTOR_INNER_ELEM, this._parent)\n  }\n\n  _getActiveElem() {\n    return this._getChildren().find(child => this._elemIsActive(child)) || null\n  }\n\n  _setInitialAttributes(parent, children) {\n    this._setAttributeIfNotExists(parent, 'role', 'tablist')\n\n    for (const child of children) {\n      this._setInitialAttributesOnChild(child)\n    }\n  }\n\n  _setInitialAttributesOnChild(child) {\n    child = this._getInnerElement(child)\n    const isActive = this._elemIsActive(child)\n    const outerElem = this._getOuterElement(child)\n    child.setAttribute('aria-selected', isActive)\n\n    if (outerElem !== child) {\n      this._setAttributeIfNotExists(outerElem, 'role', 'presentation')\n    }\n\n    if (!isActive) {\n      child.setAttribute('tabindex', '-1')\n    }\n\n    this._setAttributeIfNotExists(child, 'role', 'tab')\n\n    // set attributes to the related panel too\n    this._setInitialAttributesOnTargetPanel(child)\n  }\n\n  _setInitialAttributesOnTargetPanel(child) {\n    const target = SelectorEngine.getElementFromSelector(child)\n\n    if (!target) {\n      return\n    }\n\n    this._setAttributeIfNotExists(target, 'role', 'tabpanel')\n\n    if (child.id) {\n      this._setAttributeIfNotExists(target, 'aria-labelledby', `${child.id}`)\n    }\n  }\n\n  _toggleDropDown(element, open) {\n    const outerElem = this._getOuterElement(element)\n    if (!outerElem.classList.contains(CLASS_DROPDOWN)) {\n      return\n    }\n\n    const toggle = (selector, className) => {\n      const element = SelectorEngine.findOne(selector, outerElem)\n      if (element) {\n        element.classList.toggle(className, open)\n      }\n    }\n\n    toggle(SELECTOR_DROPDOWN_TOGGLE, CLASS_NAME_ACTIVE)\n    toggle(SELECTOR_DROPDOWN_MENU, CLASS_NAME_SHOW)\n    outerElem.setAttribute('aria-expanded', open)\n  }\n\n  _setAttributeIfNotExists(element, attribute, value) {\n    if (!element.hasAttribute(attribute)) {\n      element.setAttribute(attribute, value)\n    }\n  }\n\n  _elemIsActive(elem) {\n    return elem.classList.contains(CLASS_NAME_ACTIVE)\n  }\n\n  // Try to get the inner element (usually the .nav-link)\n  _getInnerElement(elem) {\n    return elem.matches(SELECTOR_INNER_ELEM) ? elem : SelectorEngine.findOne(SELECTOR_INNER_ELEM, elem)\n  }\n\n  // Try to get the outer element (usually the .nav-item)\n  _getOuterElement(elem) {\n    return elem.closest(SELECTOR_OUTER) || elem\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Tab.getOrCreateInstance(this)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault()\n  }\n\n  if (isDisabled(this)) {\n    return\n  }\n\n  Tab.getOrCreateInstance(this).show()\n})\n\n/**\n * Initialize on focus\n */\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  for (const element of SelectorEngine.find(SELECTOR_DATA_TOGGLE_ACTIVE)) {\n    Tab.getOrCreateInstance(element)\n  }\n})\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Tab)\n\nexport default Tab\n"],"names":["NAME","DATA_KEY","EVENT_KEY","EVENT_HIDE","EVENT_HIDDEN","EVENT_SHOW","EVENT_SHOWN","EVENT_CLICK_DATA_API","EVENT_KEYDOWN","EVENT_LOAD_DATA_API","ARROW_LEFT_KEY","ARROW_RIGHT_KEY","ARROW_UP_KEY","ARROW_DOWN_KEY","HOME_KEY","END_KEY","CLASS_NAME_ACTIVE","CLASS_NAME_FADE","CLASS_NAME_SHOW","CLASS_DROPDOWN","SELECTOR_DROPDOWN_TOGGLE","SELECTOR_DROPDOWN_MENU","NOT_SELECTOR_DROPDOWN_TOGGLE","SELECTOR_TAB_PANEL","SELECTOR_OUTER","SELECTOR_INNER","SELECTOR_DATA_TOGGLE","SELECTOR_INNER_ELEM","SELECTOR_DATA_TOGGLE_ACTIVE","Tab","_BaseComponent","element","_this","call","_parent","_element","closest","_assertThisInitialized","_setInitialAttributes","_getChildren","EventHandler","on","event","_keydown","_inheritsLoose","_proto","prototype","show","innerElem","_elemIsActive","active","_getActiveElem","hideEvent","trigger","relatedTarget","showEvent","defaultPrevented","_deactivate","_activate","relatedElem","_this2","classList","add","SelectorEngine","getElementFromSelector","complete","getAttribute","removeAttribute","setAttribute","_toggleDropDown","_queueCallback","contains","_this3","remove","blur","includes","key","stopPropagation","preventDefault","children","filter","isDisabled","nextActiveElement","length","isNext","getNextActiveElement","target","focus","preventScroll","getOrCreateInstance","find","_this4","child","parent","_setAttributeIfNotExists","_iterator","_createForOfIteratorHelperLoose","_step","done","value","_setInitialAttributesOnChild","_getInnerElement","isActive","outerElem","_getOuterElement","_setInitialAttributesOnTargetPanel","id","open","toggle","selector","className","findOne","attribute","hasAttribute","elem","matches","jQueryInterface","config","each","data","undefined","startsWith","TypeError","_createClass","get","BaseComponent","document","tagName","window","_iterator2","_step2","defineJQueryPlugin"],"mappings":"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"}