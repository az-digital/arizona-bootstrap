{"version":3,"file":"collapse.js","sources":["../src/collapse.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap collapse.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport {\n  defineJQueryPlugin,\n  getElement,\n  reflow\n} from './util/index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'collapse'\nconst DATA_KEY = 'bs.collapse'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_COLLAPSE = 'collapse'\nconst CLASS_NAME_COLLAPSING = 'collapsing'\nconst CLASS_NAME_COLLAPSED = 'collapsed'\nconst CLASS_NAME_DEEPER_CHILDREN = `:scope .${CLASS_NAME_COLLAPSE} .${CLASS_NAME_COLLAPSE}`\nconst CLASS_NAME_HORIZONTAL = 'collapse-horizontal'\n\nconst WIDTH = 'width'\nconst HEIGHT = 'height'\n\nconst SELECTOR_ACTIVES = '.collapse.show, .collapse.collapsing'\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"collapse\"]'\n\nconst Default = {\n  parent: null,\n  toggle: true\n}\n\nconst DefaultType = {\n  parent: '(null|element)',\n  toggle: 'boolean'\n}\n\n/**\n * Class definition\n */\n\nclass Collapse extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._isTransitioning = false\n    this._triggerArray = []\n\n    const toggleList = SelectorEngine.find(SELECTOR_DATA_TOGGLE)\n\n    for (const elem of toggleList) {\n      const selector = SelectorEngine.getSelectorFromElement(elem)\n      const filterElement = SelectorEngine.find(selector)\n        .filter(foundElement => foundElement === this._element)\n\n      if (selector !== null && filterElement.length) {\n        this._triggerArray.push(elem)\n      }\n    }\n\n    this._initializeChildren()\n\n    if (!this._config.parent) {\n      this._addAriaAndCollapsedClass(this._triggerArray, this._isShown())\n    }\n\n    if (this._config.toggle) {\n      this.toggle()\n    }\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  toggle() {\n    if (this._isShown()) {\n      this.hide()\n    } else {\n      this.show()\n    }\n  }\n\n  show() {\n    if (this._isTransitioning || this._isShown()) {\n      return\n    }\n\n    let activeChildren = []\n\n    // find active children\n    if (this._config.parent) {\n      activeChildren = this._getFirstLevelChildren(SELECTOR_ACTIVES)\n        .filter(element => element !== this._element)\n        .map(element => Collapse.getOrCreateInstance(element, { toggle: false }))\n    }\n\n    if (activeChildren.length && activeChildren[0]._isTransitioning) {\n      return\n    }\n\n    const startEvent = EventHandler.trigger(this._element, EVENT_SHOW)\n    if (startEvent.defaultPrevented) {\n      return\n    }\n\n    for (const activeInstance of activeChildren) {\n      activeInstance.hide()\n    }\n\n    const dimension = this._getDimension()\n\n    this._element.classList.remove(CLASS_NAME_COLLAPSE)\n    this._element.classList.add(CLASS_NAME_COLLAPSING)\n\n    this._element.style[dimension] = 0\n\n    this._addAriaAndCollapsedClass(this._triggerArray, true)\n    this._isTransitioning = true\n\n    const complete = () => {\n      this._isTransitioning = false\n\n      this._element.classList.remove(CLASS_NAME_COLLAPSING)\n      this._element.classList.add(CLASS_NAME_COLLAPSE, CLASS_NAME_SHOW)\n\n      this._element.style[dimension] = ''\n\n      EventHandler.trigger(this._element, EVENT_SHOWN)\n    }\n\n    const capitalizedDimension = dimension[0].toUpperCase() + dimension.slice(1)\n    const scrollSize = `scroll${capitalizedDimension}`\n\n    this._queueCallback(complete, this._element, true)\n    this._element.style[dimension] = `${this._element[scrollSize]}px`\n  }\n\n  hide() {\n    if (this._isTransitioning || !this._isShown()) {\n      return\n    }\n\n    const startEvent = EventHandler.trigger(this._element, EVENT_HIDE)\n    if (startEvent.defaultPrevented) {\n      return\n    }\n\n    const dimension = this._getDimension()\n\n    this._element.style[dimension] = `${this._element.getBoundingClientRect()[dimension]}px`\n\n    reflow(this._element)\n\n    this._element.classList.add(CLASS_NAME_COLLAPSING)\n    this._element.classList.remove(CLASS_NAME_COLLAPSE, CLASS_NAME_SHOW)\n\n    for (const trigger of this._triggerArray) {\n      const element = SelectorEngine.getElementFromSelector(trigger)\n\n      if (element && !this._isShown(element)) {\n        this._addAriaAndCollapsedClass([trigger], false)\n      }\n    }\n\n    this._isTransitioning = true\n\n    const complete = () => {\n      this._isTransitioning = false\n      this._element.classList.remove(CLASS_NAME_COLLAPSING)\n      this._element.classList.add(CLASS_NAME_COLLAPSE)\n      EventHandler.trigger(this._element, EVENT_HIDDEN)\n    }\n\n    this._element.style[dimension] = ''\n\n    this._queueCallback(complete, this._element, true)\n  }\n\n  _isShown(element = this._element) {\n    return element.classList.contains(CLASS_NAME_SHOW)\n  }\n\n  // Private\n  _configAfterMerge(config) {\n    config.toggle = Boolean(config.toggle) // Coerce string values\n    config.parent = getElement(config.parent)\n    return config\n  }\n\n  _getDimension() {\n    return this._element.classList.contains(CLASS_NAME_HORIZONTAL) ? WIDTH : HEIGHT\n  }\n\n  _initializeChildren() {\n    if (!this._config.parent) {\n      return\n    }\n\n    const children = this._getFirstLevelChildren(SELECTOR_DATA_TOGGLE)\n\n    for (const element of children) {\n      const selected = SelectorEngine.getElementFromSelector(element)\n\n      if (selected) {\n        this._addAriaAndCollapsedClass([element], this._isShown(selected))\n      }\n    }\n  }\n\n  _getFirstLevelChildren(selector) {\n    const children = SelectorEngine.find(CLASS_NAME_DEEPER_CHILDREN, this._config.parent)\n    // remove children if greater depth\n    return SelectorEngine.find(selector, this._config.parent).filter(element => !children.includes(element))\n  }\n\n  _addAriaAndCollapsedClass(triggerArray, isOpen) {\n    if (!triggerArray.length) {\n      return\n    }\n\n    for (const element of triggerArray) {\n      element.classList.toggle(CLASS_NAME_COLLAPSED, !isOpen)\n      element.setAttribute('aria-expanded', isOpen)\n    }\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    const _config = {}\n    if (typeof config === 'string' && /show|hide/.test(config)) {\n      _config.toggle = false\n    }\n\n    return this.each(function () {\n      const data = Collapse.getOrCreateInstance(this, _config)\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  // preventDefault only for <a> elements (which change the URL) not inside the collapsible element\n  if (event.target.tagName === 'A' || (event.delegateTarget && event.delegateTarget.tagName === 'A')) {\n    event.preventDefault()\n  }\n\n  for (const element of SelectorEngine.getMultipleElementsFromSelector(this)) {\n    Collapse.getOrCreateInstance(element, { toggle: false }).toggle()\n  }\n})\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Collapse)\n\nexport default Collapse\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","EVENT_SHOW","EVENT_SHOWN","EVENT_HIDE","EVENT_HIDDEN","EVENT_CLICK_DATA_API","CLASS_NAME_SHOW","CLASS_NAME_COLLAPSE","CLASS_NAME_COLLAPSING","CLASS_NAME_COLLAPSED","CLASS_NAME_DEEPER_CHILDREN","CLASS_NAME_HORIZONTAL","WIDTH","HEIGHT","SELECTOR_ACTIVES","SELECTOR_DATA_TOGGLE","Default","parent","toggle","DefaultType","Collapse","_BaseComponent","element","config","_this","call","_isTransitioning","_triggerArray","toggleList","SelectorEngine","find","_iterator","_createForOfIteratorHelperLoose","_step","done","elem","value","selector","getSelectorFromElement","filterElement","filter","foundElement","_element","length","push","_initializeChildren","_config","_addAriaAndCollapsedClass","_isShown","_inheritsLoose","_proto","prototype","hide","show","_this2","activeChildren","_getFirstLevelChildren","map","getOrCreateInstance","startEvent","EventHandler","trigger","defaultPrevented","_iterator2","_step2","activeInstance","dimension","_getDimension","classList","remove","add","style","complete","capitalizedDimension","toUpperCase","slice","scrollSize","_queueCallback","_this3","getBoundingClientRect","reflow","_iterator3","_step3","getElementFromSelector","contains","_configAfterMerge","Boolean","getElement","children","_iterator4","_step4","selected","includes","triggerArray","isOpen","_iterator5","_step5","setAttribute","jQueryInterface","test","each","data","TypeError","_createClass","key","get","BaseComponent","on","document","event","target","tagName","delegateTarget","preventDefault","_iterator6","getMultipleElementsFromSelector","_step6","defineJQueryPlugin"],"mappings":"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"}