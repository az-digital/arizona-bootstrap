{"version":3,"file":"tooltip.js","sources":["../src/tooltip.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap tooltip.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport * as Popper from '@popperjs/core'\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport Manipulator from './dom/manipulator.js'\nimport {\n  defineJQueryPlugin, execute, findShadowRoot, getElement, getUID, isRTL, noop\n} from './util/index.js'\nimport { DefaultAllowlist } from './util/sanitizer.js'\nimport TemplateFactory from './util/template-factory.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'tooltip'\nconst DISALLOWED_ATTRIBUTES = new Set(['sanitize', 'allowList', 'sanitizeFn'])\n\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_MODAL = 'modal'\nconst CLASS_NAME_SHOW = 'show'\n\nconst SELECTOR_TOOLTIP_INNER = '.tooltip-inner'\nconst SELECTOR_MODAL = `.${CLASS_NAME_MODAL}`\n\nconst EVENT_MODAL_HIDE = 'hide.bs.modal'\n\nconst TRIGGER_HOVER = 'hover'\nconst TRIGGER_FOCUS = 'focus'\nconst TRIGGER_CLICK = 'click'\nconst TRIGGER_MANUAL = 'manual'\n\nconst EVENT_HIDE = 'hide'\nconst EVENT_HIDDEN = 'hidden'\nconst EVENT_SHOW = 'show'\nconst EVENT_SHOWN = 'shown'\nconst EVENT_INSERTED = 'inserted'\nconst EVENT_CLICK = 'click'\nconst EVENT_FOCUSIN = 'focusin'\nconst EVENT_FOCUSOUT = 'focusout'\nconst EVENT_MOUSEENTER = 'mouseenter'\nconst EVENT_MOUSELEAVE = 'mouseleave'\n\nconst AttachmentMap = {\n  AUTO: 'auto',\n  TOP: 'top',\n  RIGHT: isRTL() ? 'left' : 'right',\n  BOTTOM: 'bottom',\n  LEFT: isRTL() ? 'right' : 'left'\n}\n\nconst Default = {\n  allowList: DefaultAllowlist,\n  animation: true,\n  boundary: 'clippingParents',\n  container: false,\n  customClass: '',\n  delay: 0,\n  fallbackPlacements: ['top', 'right', 'bottom', 'left'],\n  html: false,\n  offset: [0, 6],\n  placement: 'top',\n  popperConfig: null,\n  sanitize: true,\n  sanitizeFn: null,\n  selector: false,\n  template: '<div class=\"tooltip\" role=\"tooltip\">' +\n            '<div class=\"tooltip-arrow\"></div>' +\n            '<div class=\"tooltip-inner\"></div>' +\n            '</div>',\n  title: '',\n  trigger: 'hover focus'\n}\n\nconst DefaultType = {\n  allowList: 'object',\n  animation: 'boolean',\n  boundary: '(string|element)',\n  container: '(string|element|boolean)',\n  customClass: '(string|function)',\n  delay: '(number|object)',\n  fallbackPlacements: 'array',\n  html: 'boolean',\n  offset: '(array|string|function)',\n  placement: '(string|function)',\n  popperConfig: '(null|object|function)',\n  sanitize: 'boolean',\n  sanitizeFn: '(null|function)',\n  selector: '(string|boolean)',\n  template: 'string',\n  title: '(string|element|function)',\n  trigger: 'string'\n}\n\n/**\n * Class definition\n */\n\nclass Tooltip extends BaseComponent {\n  constructor(element, config) {\n    if (typeof Popper === 'undefined') {\n      throw new TypeError('Bootstrap\\'s tooltips require Popper (https://popper.js.org/docs/v2/)')\n    }\n\n    super(element, config)\n\n    // Private\n    this._isEnabled = true\n    this._timeout = 0\n    this._isHovered = null\n    this._activeTrigger = {}\n    this._popper = null\n    this._templateFactory = null\n    this._newContent = null\n\n    // Protected\n    this.tip = null\n\n    this._setListeners()\n\n    if (!this._config.selector) {\n      this._fixTitle()\n    }\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  enable() {\n    this._isEnabled = true\n  }\n\n  disable() {\n    this._isEnabled = false\n  }\n\n  toggleEnabled() {\n    this._isEnabled = !this._isEnabled\n  }\n\n  toggle() {\n    if (!this._isEnabled) {\n      return\n    }\n\n    if (this._isShown()) {\n      this._leave()\n      return\n    }\n\n    this._enter()\n  }\n\n  dispose() {\n    clearTimeout(this._timeout)\n\n    EventHandler.off(this._element.closest(SELECTOR_MODAL), EVENT_MODAL_HIDE, this._hideModalHandler)\n\n    if (this._element.getAttribute('data-bs-original-title')) {\n      this._element.setAttribute('title', this._element.getAttribute('data-bs-original-title'))\n    }\n\n    this._disposePopper()\n    super.dispose()\n  }\n\n  show() {\n    if (this._element.style.display === 'none') {\n      throw new Error('Please use show on visible elements')\n    }\n\n    if (!(this._isWithContent() && this._isEnabled)) {\n      return\n    }\n\n    const showEvent = EventHandler.trigger(this._element, this.constructor.eventName(EVENT_SHOW))\n    const shadowRoot = findShadowRoot(this._element)\n    const isInTheDom = (shadowRoot || this._element.ownerDocument.documentElement).contains(this._element)\n\n    if (showEvent.defaultPrevented || !isInTheDom) {\n      return\n    }\n\n    // TODO: v6 remove this or make it optional\n    this._disposePopper()\n\n    const tip = this._getTipElement()\n\n    this._element.setAttribute('aria-describedby', tip.getAttribute('id'))\n\n    const { container } = this._config\n\n    if (!this._element.ownerDocument.documentElement.contains(this.tip)) {\n      container.append(tip)\n      EventHandler.trigger(this._element, this.constructor.eventName(EVENT_INSERTED))\n    }\n\n    this._popper = this._createPopper(tip)\n\n    tip.classList.add(CLASS_NAME_SHOW)\n\n    // If this is a touch-enabled device we add extra\n    // empty mouseover listeners to the body's immediate children;\n    // only needed because of broken event delegation on iOS\n    // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n    if ('ontouchstart' in document.documentElement) {\n      for (const element of [].concat(...document.body.children)) {\n        EventHandler.on(element, 'mouseover', noop)\n      }\n    }\n\n    const complete = () => {\n      EventHandler.trigger(this._element, this.constructor.eventName(EVENT_SHOWN))\n\n      if (this._isHovered === false) {\n        this._leave()\n      }\n\n      this._isHovered = false\n    }\n\n    this._queueCallback(complete, this.tip, this._isAnimated())\n  }\n\n  hide() {\n    if (!this._isShown()) {\n      return\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, this.constructor.eventName(EVENT_HIDE))\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    const tip = this._getTipElement()\n    tip.classList.remove(CLASS_NAME_SHOW)\n\n    // If this is a touch-enabled device we remove the extra\n    // empty mouseover listeners we added for iOS support\n    if ('ontouchstart' in document.documentElement) {\n      for (const element of [].concat(...document.body.children)) {\n        EventHandler.off(element, 'mouseover', noop)\n      }\n    }\n\n    this._activeTrigger[TRIGGER_CLICK] = false\n    this._activeTrigger[TRIGGER_FOCUS] = false\n    this._activeTrigger[TRIGGER_HOVER] = false\n    this._isHovered = null // it is a trick to support manual triggering\n\n    const complete = () => {\n      if (this._isWithActiveTrigger()) {\n        return\n      }\n\n      if (!this._isHovered) {\n        this._disposePopper()\n      }\n\n      this._element.removeAttribute('aria-describedby')\n      EventHandler.trigger(this._element, this.constructor.eventName(EVENT_HIDDEN))\n    }\n\n    this._queueCallback(complete, this.tip, this._isAnimated())\n  }\n\n  update() {\n    if (this._popper) {\n      this._popper.update()\n    }\n  }\n\n  // Protected\n  _isWithContent() {\n    return Boolean(this._getTitle())\n  }\n\n  _getTipElement() {\n    if (!this.tip) {\n      this.tip = this._createTipElement(this._newContent || this._getContentForTemplate())\n    }\n\n    return this.tip\n  }\n\n  _createTipElement(content) {\n    const tip = this._getTemplateFactory(content).toHtml()\n\n    // TODO: remove this check in v6\n    if (!tip) {\n      return null\n    }\n\n    tip.classList.remove(CLASS_NAME_FADE, CLASS_NAME_SHOW)\n    // TODO: v6 the following can be achieved with CSS only\n    tip.classList.add(`bs-${this.constructor.NAME}-auto`)\n\n    const tipId = getUID(this.constructor.NAME).toString()\n\n    tip.setAttribute('id', tipId)\n\n    if (this._isAnimated()) {\n      tip.classList.add(CLASS_NAME_FADE)\n    }\n\n    return tip\n  }\n\n  setContent(content) {\n    this._newContent = content\n    if (this._isShown()) {\n      this._disposePopper()\n      this.show()\n    }\n  }\n\n  _getTemplateFactory(content) {\n    if (this._templateFactory) {\n      this._templateFactory.changeContent(content)\n    } else {\n      this._templateFactory = new TemplateFactory({\n        ...this._config,\n        // the `content` var has to be after `this._config`\n        // to override config.content in case of popover\n        content,\n        extraClass: this._resolvePossibleFunction(this._config.customClass)\n      })\n    }\n\n    return this._templateFactory\n  }\n\n  _getContentForTemplate() {\n    return {\n      [SELECTOR_TOOLTIP_INNER]: this._getTitle()\n    }\n  }\n\n  _getTitle() {\n    return this._resolvePossibleFunction(this._config.title) || this._element.getAttribute('data-bs-original-title')\n  }\n\n  // Private\n  _initializeOnDelegatedTarget(event) {\n    return this.constructor.getOrCreateInstance(event.delegateTarget, this._getDelegateConfig())\n  }\n\n  _isAnimated() {\n    return this._config.animation || (this.tip && this.tip.classList.contains(CLASS_NAME_FADE))\n  }\n\n  _isShown() {\n    return this.tip && this.tip.classList.contains(CLASS_NAME_SHOW)\n  }\n\n  _createPopper(tip) {\n    const placement = execute(this._config.placement, [this, tip, this._element])\n    const attachment = AttachmentMap[placement.toUpperCase()]\n    return Popper.createPopper(this._element, tip, this._getPopperConfig(attachment))\n  }\n\n  _getOffset() {\n    const { offset } = this._config\n\n    if (typeof offset === 'string') {\n      return offset.split(',').map(value => Number.parseInt(value, 10))\n    }\n\n    if (typeof offset === 'function') {\n      return popperData => offset(popperData, this._element)\n    }\n\n    return offset\n  }\n\n  _resolvePossibleFunction(arg) {\n    return execute(arg, [this._element, this._element])\n  }\n\n  _getPopperConfig(attachment) {\n    const defaultBsPopperConfig = {\n      placement: attachment,\n      modifiers: [\n        {\n          name: 'flip',\n          options: {\n            fallbackPlacements: this._config.fallbackPlacements\n          }\n        },\n        {\n          name: 'offset',\n          options: {\n            offset: this._getOffset()\n          }\n        },\n        {\n          name: 'preventOverflow',\n          options: {\n            boundary: this._config.boundary\n          }\n        },\n        {\n          name: 'arrow',\n          options: {\n            element: `.${this.constructor.NAME}-arrow`\n          }\n        },\n        {\n          name: 'preSetPlacement',\n          enabled: true,\n          phase: 'beforeMain',\n          fn: data => {\n            // Pre-set Popper's placement attribute in order to read the arrow sizes properly.\n            // Otherwise, Popper mixes up the width and height dimensions since the initial arrow style is for top placement\n            this._getTipElement().setAttribute('data-popper-placement', data.state.placement)\n          }\n        }\n      ]\n    }\n\n    return {\n      ...defaultBsPopperConfig,\n      ...execute(this._config.popperConfig, [undefined, defaultBsPopperConfig])\n    }\n  }\n\n  _setListeners() {\n    const triggers = this._config.trigger.split(' ')\n\n    for (const trigger of triggers) {\n      if (trigger === 'click') {\n        EventHandler.on(this._element, this.constructor.eventName(EVENT_CLICK), this._config.selector, event => {\n          const context = this._initializeOnDelegatedTarget(event)\n          context.toggle()\n        })\n      } else if (trigger !== TRIGGER_MANUAL) {\n        const eventIn = trigger === TRIGGER_HOVER ?\n          this.constructor.eventName(EVENT_MOUSEENTER) :\n          this.constructor.eventName(EVENT_FOCUSIN)\n        const eventOut = trigger === TRIGGER_HOVER ?\n          this.constructor.eventName(EVENT_MOUSELEAVE) :\n          this.constructor.eventName(EVENT_FOCUSOUT)\n\n        EventHandler.on(this._element, eventIn, this._config.selector, event => {\n          const context = this._initializeOnDelegatedTarget(event)\n          context._activeTrigger[event.type === 'focusin' ? TRIGGER_FOCUS : TRIGGER_HOVER] = true\n          context._enter()\n        })\n        EventHandler.on(this._element, eventOut, this._config.selector, event => {\n          const context = this._initializeOnDelegatedTarget(event)\n          context._activeTrigger[event.type === 'focusout' ? TRIGGER_FOCUS : TRIGGER_HOVER] =\n            context._element.contains(event.relatedTarget)\n\n          context._leave()\n        })\n      }\n    }\n\n    this._hideModalHandler = () => {\n      if (this._element) {\n        this.hide()\n      }\n    }\n\n    EventHandler.on(this._element.closest(SELECTOR_MODAL), EVENT_MODAL_HIDE, this._hideModalHandler)\n  }\n\n  _fixTitle() {\n    const title = this._element.getAttribute('title')\n\n    if (!title) {\n      return\n    }\n\n    if (!this._element.getAttribute('aria-label') && !this._element.textContent.trim()) {\n      this._element.setAttribute('aria-label', title)\n    }\n\n    this._element.setAttribute('data-bs-original-title', title) // DO NOT USE IT. Is only for backwards compatibility\n    this._element.removeAttribute('title')\n  }\n\n  _enter() {\n    if (this._isShown() || this._isHovered) {\n      this._isHovered = true\n      return\n    }\n\n    this._isHovered = true\n\n    this._setTimeout(() => {\n      if (this._isHovered) {\n        this.show()\n      }\n    }, this._config.delay.show)\n  }\n\n  _leave() {\n    if (this._isWithActiveTrigger()) {\n      return\n    }\n\n    this._isHovered = false\n\n    this._setTimeout(() => {\n      if (!this._isHovered) {\n        this.hide()\n      }\n    }, this._config.delay.hide)\n  }\n\n  _setTimeout(handler, timeout) {\n    clearTimeout(this._timeout)\n    this._timeout = setTimeout(handler, timeout)\n  }\n\n  _isWithActiveTrigger() {\n    return Object.values(this._activeTrigger).includes(true)\n  }\n\n  _getConfig(config) {\n    const dataAttributes = Manipulator.getDataAttributes(this._element)\n\n    for (const dataAttribute of Object.keys(dataAttributes)) {\n      if (DISALLOWED_ATTRIBUTES.has(dataAttribute)) {\n        delete dataAttributes[dataAttribute]\n      }\n    }\n\n    config = {\n      ...dataAttributes,\n      ...(typeof config === 'object' && config ? config : {})\n    }\n    config = this._mergeConfigObj(config)\n    config = this._configAfterMerge(config)\n    this._typeCheckConfig(config)\n    return config\n  }\n\n  _configAfterMerge(config) {\n    config.container = config.container === false ? document.body : getElement(config.container)\n\n    if (typeof config.delay === 'number') {\n      config.delay = {\n        show: config.delay,\n        hide: config.delay\n      }\n    }\n\n    if (typeof config.title === 'number') {\n      config.title = config.title.toString()\n    }\n\n    if (typeof config.content === 'number') {\n      config.content = config.content.toString()\n    }\n\n    return config\n  }\n\n  _getDelegateConfig() {\n    const config = {}\n\n    for (const [key, value] of Object.entries(this._config)) {\n      if (this.constructor.Default[key] !== value) {\n        config[key] = value\n      }\n    }\n\n    config.selector = false\n    config.trigger = 'manual'\n\n    // In the future can be replaced with:\n    // const keysWithDifferentValues = Object.entries(this._config).filter(entry => this.constructor.Default[entry[0]] !== this._config[entry[0]])\n    // `Object.fromEntries(keysWithDifferentValues)`\n    return config\n  }\n\n  _disposePopper() {\n    if (this._popper) {\n      this._popper.destroy()\n      this._popper = null\n    }\n\n    if (this.tip) {\n      this.tip.remove()\n      this.tip = null\n    }\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Tooltip.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    })\n  }\n}\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Tooltip)\n\nexport default Tooltip\n"],"names":["NAME","DISALLOWED_ATTRIBUTES","Set","CLASS_NAME_FADE","CLASS_NAME_MODAL","CLASS_NAME_SHOW","SELECTOR_TOOLTIP_INNER","SELECTOR_MODAL","EVENT_MODAL_HIDE","TRIGGER_HOVER","TRIGGER_FOCUS","TRIGGER_CLICK","TRIGGER_MANUAL","EVENT_HIDE","EVENT_HIDDEN","EVENT_SHOW","EVENT_SHOWN","EVENT_INSERTED","EVENT_CLICK","EVENT_FOCUSIN","EVENT_FOCUSOUT","EVENT_MOUSEENTER","EVENT_MOUSELEAVE","AttachmentMap","AUTO","TOP","RIGHT","isRTL","BOTTOM","LEFT","Default","allowList","DefaultAllowlist","animation","boundary","container","customClass","delay","fallbackPlacements","html","offset","placement","popperConfig","sanitize","sanitizeFn","selector","template","title","trigger","DefaultType","Tooltip","_BaseComponent","element","config","_this","Popper","TypeError","call","_isEnabled","_timeout","_isHovered","_activeTrigger","_popper","_templateFactory","_newContent","tip","_setListeners","_config","_fixTitle","_inheritsLoose","_proto","prototype","enable","disable","toggleEnabled","toggle","_isShown","_leave","_enter","dispose","clearTimeout","EventHandler","off","_element","closest","_hideModalHandler","getAttribute","setAttribute","_disposePopper","show","_this2","style","display","Error","_isWithContent","showEvent","constructor","eventName","shadowRoot","findShadowRoot","isInTheDom","ownerDocument","documentElement","contains","defaultPrevented","_getTipElement","append","_createPopper","classList","add","document","_iterator","_createForOfIteratorHelperLoose","_ref","concat","apply","body","children","_step","done","value","on","noop","complete","_queueCallback","_isAnimated","hide","_this3","hideEvent","remove","_iterator2","_ref2","_step2","_isWithActiveTrigger","removeAttribute","update","Boolean","_getTitle","_createTipElement","_getContentForTemplate","content","_getTemplateFactory","toHtml","tipId","getUID","toString","setContent","changeContent","TemplateFactory","_extends","extraClass","_resolvePossibleFunction","_ref3","_initializeOnDelegatedTarget","event","getOrCreateInstance","delegateTarget","_getDelegateConfig","execute","attachment","toUpperCase","createPopper","_getPopperConfig","_getOffset","_this4","split","map","Number","parseInt","popperData","arg","_this5","defaultBsPopperConfig","modifiers","name","options","enabled","phase","fn","data","state","undefined","_this6","triggers","_iterator3","_step3","context","eventIn","eventOut","type","relatedTarget","textContent","trim","_this7","_setTimeout","_this8","handler","timeout","setTimeout","Object","values","includes","_getConfig","dataAttributes","Manipulator","getDataAttributes","_i","_Object$keys","keys","length","dataAttribute","has","_mergeConfigObj","_configAfterMerge","_typeCheckConfig","getElement","_i2","_Object$entries","entries","_Object$entries$_i","key","destroy","jQueryInterface","each","_createClass","get","BaseComponent","defineJQueryPlugin"],"mappings":"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"}