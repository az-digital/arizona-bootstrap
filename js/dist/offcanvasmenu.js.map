{"version":3,"file":"offcanvasmenu.js","sources":["../src/offcanvasmenu.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Arizona Bootstrap: offcanvasmenu.js\n * Licensed under MIT (https://github.com/az-digital/arizona-bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from '../../node_modules/bootstrap/js/src/base-component.js'\nimport EventHandler from '../../node_modules/bootstrap/js/src/dom/event-handler.js'\nimport SelectorEngine from '../../node_modules/bootstrap/js/src/dom/selector-engine.js'\nimport Backdrop from '../../node_modules/bootstrap/js/src/util/backdrop.js'\nimport {\n  defineJQueryPlugin,\n  getElement,\n  reflow\n} from '../../node_modules/bootstrap/js/src/util/index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'offcanvasmenu'\nconst AZ_VERSION = 'v0.0.4'\nconst DATA_KEY = 'az.offcanvasmenu'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst EVENT_OPEN = `open${EVENT_KEY}`\nconst EVENT_OPENED = `opened${EVENT_KEY}`\nconst EVENT_CLOSE = `close${EVENT_KEY}`\nconst EVENT_CLOSED = `closed${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_OPEN = 'open'\nconst CLASS_NAME_CLOSE = 'offcanvasmenu-toggle'\nconst CLASS_NAME_CLOSING = 'closing'\nconst CLASS_NAME_CLOSED = 'closed'\nconst CLASS_NAME_DEEPER_CHILDREN = `:scope .${CLASS_NAME_CLOSE} .${CLASS_NAME_CLOSE}`\n\nconst CLASS_NAME_FREEZE = 'offcanvasmenu-toggle-body-freeze'\nconst CLASS_NAME_BACKDROP = 'offcanvasmenu-backdrop'\n\nconst SELECTOR_ACTIVES = '.open, .closing'\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"offcanvasmenu\"]'\n\nconst Default = {\n  toggle: true,\n  parent: null\n}\n\nconst DefaultType = {\n  toggle: 'boolean',\n  parent: '(null|element)'\n}\n\n/**\n * Class definition\n */\n\nclass Offcanvasmenu extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._isTransitioning = false\n    this._triggerArray = []\n    this._backdrop = this._initializeBackDrop()\n\n    const toggleList = SelectorEngine.find(SELECTOR_DATA_TOGGLE)\n\n    for (const elem of toggleList) {\n      const selector = SelectorEngine.getSelectorFromElement(elem)\n      const filterElement = SelectorEngine.find(selector)\n        .filter(foundElement => foundElement === this._element)\n\n      if (selector !== null && filterElement.length) {\n        this._triggerArray.push(elem)\n      }\n    }\n\n    this._initializeChildren()\n\n    if (!this._config.parent) {\n      this._addAriaAndClosedClass(this._triggerArray, this._isOpen())\n    }\n\n    if (this._config.toggle) {\n      this.toggle()\n    }\n  }\n\n  // Getters\n\n  static get AZ_VERSION() {\n    return AZ_VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n\n  toggle() {\n    if (this._isOpen()) {\n      this.close()\n    } else {\n      this.open()\n    }\n  }\n\n  open() {\n    if (this._isTransitioning || this._isOpen()) {\n      return\n    }\n\n    let activeChildren = []\n\n    // find active children\n    if (this._config.parent) {\n      activeChildren = this._getFirstLevelChildren(SELECTOR_ACTIVES)\n        .filter(element => element !== this._element)\n        .map(element => Offcanvasmenu.getOrCreateInstance(element, { toggle: false }))\n    }\n\n    if (activeChildren.length && activeChildren[0]._isTransitioning) {\n      return\n    }\n\n    const startEvent = EventHandler.trigger(this._element, EVENT_OPEN)\n    if (startEvent.defaultPrevented) {\n      return\n    }\n\n    for (const activeInstance of activeChildren) {\n      activeInstance.close()\n    }\n\n    this._backdrop.show()\n\n    this._element.classList.remove(CLASS_NAME_CLOSE)\n    this._element.classList.add(CLASS_NAME_CLOSING)\n\n    this._addAriaAndClosedClass(this._triggerArray, true)\n    this._isTransitioning = true\n\n    const complete = () => {\n      this._isTransitioning = false\n\n      this._element.classList.remove(CLASS_NAME_CLOSING)\n      this._element.classList.add(CLASS_NAME_CLOSE, CLASS_NAME_OPEN)\n\n      document.body.classList.add(CLASS_NAME_FREEZE)\n\n      EventHandler.trigger(this._element, EVENT_OPENED)\n    }\n\n    this._queueCallback(complete, this._element)\n  }\n\n  close() {\n    if (this._isTransitioning || !this._isOpen()) {\n      return\n    }\n\n    const startEvent = EventHandler.trigger(this._element, EVENT_CLOSE)\n    if (startEvent.defaultPrevented) {\n      return\n    }\n\n    reflow(this._element)\n\n    this._element.classList.add(CLASS_NAME_CLOSING)\n    this._element.classList.remove(CLASS_NAME_CLOSE, CLASS_NAME_OPEN)\n\n    for (const trigger of this._triggerArray) {\n      const element = SelectorEngine.getElementFromSelector(trigger)\n\n      if (element && !this._isOpen(element)) {\n        this._addAriaAndClosedClass([trigger], false)\n      }\n    }\n\n    this._isTransitioning = true\n\n    const complete = () => {\n      this._isTransitioning = false\n      this._backdrop.hide()\n\n      document.body.classList.remove(CLASS_NAME_FREEZE)\n\n      this._element.classList.remove(CLASS_NAME_CLOSING)\n      this._element.classList.add(CLASS_NAME_CLOSE)\n      EventHandler.trigger(this._element, EVENT_CLOSED)\n    }\n\n    this._queueCallback(complete, this._element)\n  }\n\n  setTransitioning(isTransitioning) {\n    this._isTransitioning = isTransitioning\n  }\n\n  dispose() {\n    this._backdrop.dispose()\n    super.dispose()\n  }\n\n  // Private\n\n  _isOpen(element = this._element) {\n    return element.classList.contains(CLASS_NAME_OPEN)\n  }\n\n  _initializeBackDrop() {\n    return new Backdrop({\n      className: CLASS_NAME_BACKDROP\n    })\n  }\n\n  _configAfterMerge(config) {\n    config.toggle = Boolean(config.toggle) // Coerce string values\n    config.parent = getElement(config.parent)\n    return config\n  }\n\n  _initializeChildren() {\n    if (!this._config.parent) {\n      return\n    }\n\n    const children = this._getFirstLevelChildren(SELECTOR_DATA_TOGGLE)\n\n    for (const element of children) {\n      const selected = SelectorEngine.getElementFromSelector(element)\n\n      if (selected) {\n        this._addAriaAndClosedClass([element], this._isOpen(selected))\n      }\n    }\n  }\n\n  _getFirstLevelChildren(selector) {\n    const children = SelectorEngine.find(CLASS_NAME_DEEPER_CHILDREN, this._config.parent)\n    // remove children if greater depth\n    return SelectorEngine.find(selector, this._config.parent).filter(element => !children.includes(element))\n  }\n\n  _addAriaAndClosedClass(triggerArray, isOpen) {\n    if (!triggerArray.length) {\n      return\n    }\n\n    for (const element of triggerArray) {\n      element.classList.toggle(CLASS_NAME_CLOSED, !isOpen)\n      element.setAttribute('aria-expanded', isOpen)\n    }\n  }\n\n  // Static\n\n  static jQueryInterface(config) {\n    const _config = {}\n    if (typeof config === 'string' && /open|close/.test(config)) {\n      _config.toggle = false\n    }\n\n    return this.each(function () {\n      const data = Offcanvasmenu.getOrCreateInstance(this, _config)\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * Viewport conditional dropdown menu override for offcanvas menu.\n */\n\nlet VIEWPORT_WIDTH = false\nconst XS_BREAKPOINT_MAX = 767\n\n// @TODO Use CSS breakpoint info, rather than seemingly arbitrary window width.\n// Get the viewportWidth value.\nfunction getViewportWidth() {\n  VIEWPORT_WIDTH = window.innerWidth || document.documentElement.clientWidth\n}\n\nfor (const element of SelectorEngine.find('.dropdown.keep-open .dropdown-toggle')) {\n  EventHandler.on(element, 'click', event => {\n    getViewportWidth()\n    if (VIEWPORT_WIDTH < XS_BREAKPOINT_MAX) {\n      if (event.target.hasAttribute('aria-expanded')) {\n        event.target.parentElement.classList.remove('show')\n        event.target.setAttribute('aria-expanded', false)\n      } else {\n        event.target.parentElement.classList.add('show')\n        event.target.setAttribute('aria-expanded', true)\n      }\n\n      event.target.nextElementSibling.matches('.dropdown-menu').toggle()\n      event.stopPropagation()\n    }\n  })\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  // preventDefault only for <a> elements (which change the URL) not inside the collapsible element\n  if (event.target.tagName === 'A' || (event.delegateTarget && event.delegateTarget.tagName === 'A')) {\n    event.preventDefault()\n  }\n\n  for (const element of SelectorEngine.getMultipleElementsFromSelector(this)) {\n    Offcanvasmenu.getOrCreateInstance(element, { toggle: false }).toggle()\n  }\n})\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Offcanvasmenu)\n\nexport default Offcanvasmenu\n"],"names":["NAME","AZ_VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","EVENT_OPEN","EVENT_OPENED","EVENT_CLOSE","EVENT_CLOSED","EVENT_CLICK_DATA_API","CLASS_NAME_OPEN","CLASS_NAME_CLOSE","CLASS_NAME_CLOSING","CLASS_NAME_CLOSED","CLASS_NAME_DEEPER_CHILDREN","CLASS_NAME_FREEZE","CLASS_NAME_BACKDROP","SELECTOR_ACTIVES","SELECTOR_DATA_TOGGLE","Default","toggle","parent","DefaultType","Offcanvasmenu","_BaseComponent","element","config","_this","call","_isTransitioning","_triggerArray","_backdrop","_initializeBackDrop","toggleList","SelectorEngine","find","_iterator","_createForOfIteratorHelperLoose","_step","done","elem","value","selector","getSelectorFromElement","filterElement","filter","foundElement","_element","length","push","_initializeChildren","_config","_addAriaAndClosedClass","_isOpen","_inheritsLoose","_proto","prototype","close","open","_this2","activeChildren","_getFirstLevelChildren","map","getOrCreateInstance","startEvent","EventHandler","trigger","defaultPrevented","_iterator2","_step2","activeInstance","show","classList","remove","add","complete","document","body","_queueCallback","_this3","reflow","_iterator3","_step3","getElementFromSelector","hide","setTransitioning","isTransitioning","dispose","contains","Backdrop","className","_configAfterMerge","Boolean","getElement","children","_iterator4","_step4","selected","includes","triggerArray","isOpen","_iterator5","_step5","setAttribute","jQueryInterface","test","each","data","TypeError","_createClass","key","get","BaseComponent","VIEWPORT_WIDTH","XS_BREAKPOINT_MAX","getViewportWidth","window","innerWidth","documentElement","clientWidth","_iterator6","_step6","on","event","target","hasAttribute","parentElement","nextElementSibling","matches","stopPropagation","tagName","delegateTarget","preventDefault","_iterator7","getMultipleElementsFromSelector","_step7","defineJQueryPlugin"],"mappings":"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"}